<!DOCTYPE html>

<html>
<head>
    	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    	<link rel="stylesheet" media="screen" href="@{'/public/stylesheets/main.css'}">
        <link rel="stylesheet" type="text/css" href="@{'/public/jquery-easyui-1.4.4/themes/default/easyui.css'}">
		<link rel="stylesheet" type="text/css" href="@{'/public/jquery-easyui-1.4.4/themes/icon.css'}">
        <link rel="shortcut icon" type="image/png" href="@{'/public/images/favicon.png'}">
        
        <script type="text/javascript" src="@{'/public/jquery-easyui-1.4.4/jquery.min.js'}"></script>
		<script type="text/javascript" src="@{'/public/jquery-easyui-1.4.4/jquery.easyui.min.js'}"></script>
		<script type="text/javascript" src="@{'/public/jquery-easyui-1.4.4/locale/easyui-lang-zh_CN.js'}"></script>
</head>
    
<body>

	<div style="background-color:#e5ffb3;font-size:15px;font-weight:600;padding:15px;">员工信息详情</div>
	<!-- 
	<br/>
	<div style="background-color:#e5ffb3;font-size:14px;padding:5px">购卡信息</div>
	 -->
	 
	<table border="0">
	<tr>
	<td>
		#{form @Application.updateEmployeeToDB(e.id), onsubmit:"return check()", enctype:'multipart/form-data'}
		<div style="margin-left:100px;">
			
			<div style="margin:10px;">
			<span style="font-size:14px;display:inline-block;width:100px">登录账号：</span>
			<input id="username" name="username" class="easyui-textbox" data-options="readonly:true,required:true" value="${e.username}" style="height:32px">
			</div>
			
			<div style="margin:10px;">
			<span style="font-size:14px;display:inline-block;width:100px">新密码：</span>
			<input id="newpassword" name="newpassword" class="easyui-textbox" type="password" data-options="" style="height:32px">(如需修改密码，请输入新密码，否则请留空)
			<input id="password" name="password" type="hidden" value="${e.password}"> 
			</div>
			
			<div style="margin:10px;">
			<span style="font-size:14px;display:inline-block;width:100px">姓名：</span>
			<input id="name" name="name" class="easyui-textbox" data-options="required:true" value="${e.name}" style="height:32px">
			</div>
			
			<div style="margin:10px">
			<span style="font-size:14px;display:inline-block;width:100px">头像：</span>
			<input name="headimagefile" class="easyui-filebox" data-options="buttonText:'上传图片'" value="${e.headimage}" style="height:32px">
			<input name="headimage" type="hidden" value="${e.headimage}" >
			</div>
			
			<div style="margin:10px;">
			<span style="font-size:14px;display:inline-block;width:100px">性别：</span>
			#{if e.sex==1}
			<input type="radio" name="sex" value="1" checked required>男
			#{/if}
			#{else}
			<input type="radio" name="sex" value="1" required>男
			#{/else}
			#{if e.sex==2}
			<input type="radio" name="sex" value="2" checked required>女
			#{/if}
			#{else}
			<input type="radio" name="sex" value="2" required>女
			#{/else}
			</div>
			
			<div style="margin:10px;">
			<span style="font-size:14px;display:inline-block;width:100px">电话：</span>
			<input id="phone" name="phone" class="easyui-textbox" data-options="required:true" value="${e.phone}" style="height:32px">
			</div>
			
			<div style="margin:10px;">
			<span style="font-size:14px;display:inline-block;width:100px">身份：</span>
			#{if e.ismanager==1}
			<input type="checkbox" name="identity"  class="identityc" value="1" checked>店长
			#{/if}
			#{else}
			<input type="checkbox" name="identity"  class="identityc" value="1">店长
			#{/else}
			#{if e.isfinance==1}
			<input type="checkbox" name="identity"  class="identityc" value="2" checked>财务
			#{/if}
			#{else}
			<input type="checkbox" name="identity"  class="identityc" value="2">财务
			#{/else}
			#{if e.iscoach==1}
			<input type="checkbox" name="identity"  class="identityc" value="3" checked>教练
			#{/if}
			#{else}
			<input type="checkbox" name="identity"  class="identityc" value="3">教练
			#{/else}
			</div>
			
			<div style="margin:10px;">
			<span style="font-size:14px;display:inline-block;width:100px">登录权限：</span>
			<input type="checkbox" name="authority" value="1">会员管理（限店长）
			<input type="checkbox" name="authority" value="2">预约管理（限店长）
			<input type="checkbox" name="authority" value="3">课程管理（限教练）<br><br>
			<span style="font-size:14px;display:inline-block;width:100px"></span>
			<input type="checkbox" name="authority" value="4">健身计划（限教练）
			<input type="checkbox" name="authority" value="5">营销管理（限店长）
			<input type="checkbox" name="authority" value="6">财务管理（限财务）<br><br>
			<span style="font-size:14px;display:inline-block;width:100px"></span>
			<input type="checkbox" name="authority" value="7">员工管理（限店长）
			<input type="checkbox" name="authority" value="8">门店管理（限店长）
			<input type="checkbox" name="authority" value="9">报表管理（限店长）
			</div>
			
			<div style="margin:10px;">
			<span style="font-size:14px;display:inline-block;width:100px">所属门店：</span>
			<input id="storeid" name="storeid" class="easyui-combobox" data-options="valueField:'id',textField:'name',url:'@{Application.getAllStore()}'" value="${e.storeid}" style="height:32px">
			</div>
			
			<div style="margin:10px">
			<span style="font-size:14px;display:inline-block;width:100px">个人简介：</span>
			<textarea name="introduce" rows="8" cols="30">${e.introduce}</textarea>
			</div>
			
			<div style="margin-left:100px;">
			<input type="submit" style="width:80px;height:32px" value="确认修改">
			</div>
			
		</div>
		#{/form}
	</td>
	<td valign="top">
		<img src="/public/images/${e.headimage}" alt="员工照片" width="200" height="200" style="margin:20px">
	</td>
	<tr>
	</table>
	
	<!-- 
	<br/>
	<div style="background-color:#e5ffb3;font-size:14px;padding:5px">操课信息</div>
	 -->
</body>
	
	
<script>
var identity = document.getElementsByName("identity"); 
for (i=0; i<identity.length; i++){  
	if (identity[i].checked){  
		value = identity[i].value;
		if (value==1) one();
		else if (value==2) two();
		else if (value==3) three();
	}
}
function one() {
	var authority = document.getElementsByName("authority"); 
	authority[0].checked=true;
	authority[1].checked=true;
	authority[4].checked=true;
	authority[6].checked=true;
	authority[7].checked=true;
	authority[8].checked=true;
}
function two() {
	var authority = document.getElementsByName("authority"); 
	authority[5].checked=true;
}
function three() {
	var authority = document.getElementsByName("authority"); 
	authority[2].checked=true;
	authority[3].checked=true;
}
$("input[name='identity']").change(function(){
	var identity = document.getElementsByName("identity"); 
	var authority = document.getElementsByName("authority"); 
	for (i=0; i<authority.length; i++){  
		authority[i].checked=false;
	}
	var value;
	for (i=0; i<identity.length; i++){  
		if (identity[i].checked){  
			value = identity[i].value;
			if (value==1) {
				authority[0].checked=true;
				authority[1].checked=true;
				authority[4].checked=true;
				authority[6].checked=true;
				authority[7].checked=true;
				authority[8].checked=true;
			} else if (value==2) {
				authority[5].checked=true;
			} else if (value==3) {
				authority[2].checked=true;
				authority[3].checked=true;
			}
		}
	}
});

function check() {
	var v;
	v = $("#name").val();
	if (v==null || v=="") { alert("输入不完整！"); return false; }
	v = $("#phone").val();
	if (v==null || v=="") { alert("输入不完整！"); return false; }
	v = $("#storeid").combobox("getValue"); 
	if (v==null || v=="") { alert("输入不完整！"); return false; }
	return true;
}
</script>


</html>